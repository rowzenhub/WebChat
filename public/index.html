<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vercel Chat</title>

<!-- Socket.IO -->
<script src="/socket.io/socket.io.js"></script>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
  /* Genel stil */
  * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Roboto', sans-serif; }
  body, html { height: 100%; display: flex; justify-content: center; align-items: center; background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1); background-size: 400% 400%; animation: gradientBG 15s ease infinite; }
  @keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* Chat container */
  .chat-container { width: 90%; max-width: 500px; height: 80%; background: rgba(255,255,255,0.9); border-radius: 15px; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 8px 30px rgba(0,0,0,0.2); }

  /* Chat messages */
  #chat { flex: 1; padding: 20px; overflow-y: auto; }
  #chat div { margin-bottom: 10px; padding: 8px 12px; background: #f1f1f1; border-radius: 12px; max-width: 80%; word-wrap: break-word; animation: fadeIn 0.3s ease; }

  @keyframes fadeIn { from {opacity:0; transform:translateY(10px);} to {opacity:1; transform:translateY(0);} }

  /* Input area */
  .input-area { display: flex; border-top: 1px solid #ccc; }
  .input-area input { flex: 1; padding: 15px; border: none; outline: none; font-size: 16px; }
  .input-area button { padding: 15px 20px; background: #6a11cb; color: white; border: none; cursor: pointer; transition: background 0.3s ease; }
  .input-area button:hover { background: #2575fc; }

  /* Mobil uyum */
  @media(max-width: 600px){
    .chat-container { height: 90%; }
    #chat div { max-width: 100%; }
  }
</style>
</head>
<body>

<div class="chat-container">
  <div id="chat"></div>
  <div class="input-area">
    <input id="msg" autocomplete="off" placeholder="Mesajınızı yazın..."/>
    <button onclick="sendMsg()">Gönder</button>
  </div>
</div>

<script>
  const socket = io();

  // Mesaj alındığında chat divine ekle
  socket.on("message", (msg) => {
    const chat = document.getElementById("chat");
    const msgDiv = document.createElement("div");
    msgDiv.textContent = msg;
    chat.appendChild(msgDiv);
    chat.scrollTop = chat.scrollHeight;
  });

  // Mesaj gönderme
  function sendMsg(){
    const msgInput = document.getElementById("msg");
    const msg = msgInput.value.trim();
    if(msg.length > 0){
      socket.send(msg);
      msgInput.value = "";
    }
  }

  // Enter tuşu ile gönder
  document.getElementById("msg").addEventListener("keypress", function(e){
    if(e.key === "Enter") sendMsg();
  });
</script>

</body>
</html>
